<div class="row justify-content-center">
    <div class="col-md-10 col-lg-8">
        <!-- Tabs für Erstellungsmethode -->
        <ul class="nav nav-tabs mb-4" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="git-tab" data-bs-toggle="tab" data-bs-target="#git-content" type="button">
                    <i class="bi bi-git"></i> Von Git-Repository
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="template-tab" data-bs-toggle="tab" data-bs-target="#template-content" type="button">
                    <i class="bi bi-file-earmark-code"></i> Von Template
                </button>
            </li>
        </ul>

        <div class="tab-content">
            <!-- Tab: Von Git -->
            <div class="tab-pane fade show active" id="git-content" role="tabpanel">
                <div class="card">
                    <div class="card-header">
                        <h4 class="mb-0"><i class="bi bi-git"></i> Neues Projekt von Git-Repository</h4>
                    </div>
                    <div class="card-body">
                        <form method="POST" action="/projects/from-git">
                            <div class="mb-3">
                                <label for="git_name" class="form-label">Projektname</label>
                                <input type="text" class="form-control" id="git_name" name="name"
                                       pattern="[a-z0-9-]+" required
                                       placeholder="mein-projekt">
                                <div class="form-text">Nur Kleinbuchstaben, Zahlen und Bindestriche erlaubt</div>
                            </div>

                            <div class="mb-3">
                                <label for="repo_url" class="form-label">Repository URL</label>
                                <input type="url" class="form-control" id="repo_url" name="repo_url" required
                                       placeholder="https://github.com/username/repository">
                                <div class="form-text">HTTPS-URL von GitHub, GitLab oder Bitbucket</div>
                            </div>

                            <div class="mb-3">
                                <label for="access_token" class="form-label">
                                    Access Token <span class="text-muted">(optional)</span>
                                </label>
                                <input type="password" class="form-control" id="access_token" name="access_token"
                                       placeholder="ghp_xxxxxxxxxxxxxxxxxxxx">
                                <div class="form-text">
                                    Erforderlich für private Repositories.
                                    <a href="https://github.com/settings/tokens/new?scopes=repo" target="_blank">
                                        GitHub Token erstellen <i class="bi bi-box-arrow-up-right"></i>
                                    </a>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="git_port" class="form-label">Port</label>
                                <input type="number" class="form-control" id="git_port" name="port"
                                       value="<%= nextPort %>" min="8001" max="9999" required>
                                <div class="form-text">Nächster freier Port: <%= nextPort %></div>
                            </div>

                            <div class="alert alert-info">
                                <i class="bi bi-info-circle"></i>
                                <strong>Automatische Erkennung:</strong> Der Projekttyp wird automatisch erkannt:
                                <ul class="mb-0 mt-2">
                                    <li><code>package.json</code> vorhanden → Node.js App</li>
                                    <li><code>index.php</code> oder <code>composer.json</code> → PHP Website</li>
                                    <li><code>index.html</code> → Statische Website</li>
                                </ul>
                            </div>

                            <div class="d-flex gap-2">
                                <button type="submit" class="btn btn-primary">
                                    <i class="bi bi-git"></i> Projekt von Git erstellen
                                </button>
                                <a href="/projects" class="btn btn-outline-secondary">
                                    <i class="bi bi-x-lg"></i> Abbrechen
                                </a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Tab: Von Template -->
            <div class="tab-pane fade" id="template-content" role="tabpanel">
                <div class="card">
                    <div class="card-header">
                        <h4 class="mb-0"><i class="bi bi-folder-plus"></i> Neues Projekt von Template</h4>
                    </div>
                    <div class="card-body">
                        <form method="POST" action="/projects">
                            <div class="mb-3">
                                <label for="name" class="form-label">Projektname</label>
                                <input type="text" class="form-control" id="name" name="name"
                                       pattern="[a-z0-9-]+" required
                                       placeholder="mein-projekt">
                                <div class="form-text">Nur Kleinbuchstaben, Zahlen und Bindestriche erlaubt</div>
                            </div>

                            <div class="mb-3">
                                <label for="template" class="form-label">Template</label>
                                <select class="form-select" id="template" name="template" required>
                                    <% templates.forEach(template => { %>
                                        <option value="<%= template.name %>"><%= template.displayName %></option>
                                    <% }) %>
                                </select>
                            </div>

                            <div class="mb-3">
                                <label for="port" class="form-label">Port</label>
                                <input type="number" class="form-control" id="port" name="port"
                                       value="<%= nextPort %>" min="8001" max="9999" required>
                                <div class="form-text">Nächster freier Port: <%= nextPort %></div>
                            </div>

                            <div class="d-flex gap-2">
                                <button type="submit" class="btn btn-primary">
                                    <i class="bi bi-plus-lg"></i> Projekt erstellen
                                </button>
                                <a href="/projects" class="btn btn-outline-secondary">
                                    <i class="bi bi-x-lg"></i> Abbrechen
                                </a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Template Info (nur bei Template-Tab sichtbar) -->
        <div class="card mt-4" id="template-info-card" style="display: none;">
            <div class="card-header">
                <h5 class="mb-0"><i class="bi bi-info-circle"></i> Template-Informationen</h5>
            </div>
            <div class="card-body">
                <div class="accordion" id="templateInfo">
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#staticInfo">
                                <i class="bi bi-file-earmark-code"></i>&nbsp; Statische Website
                            </button>
                        </h2>
                        <div id="staticInfo" class="accordion-collapse collapse" data-bs-parent="#templateInfo">
                            <div class="accordion-body">
                                <ul class="mb-0">
                                    <li>Nginx Webserver</li>
                                    <li>HTML, CSS, JavaScript</li>
                                    <li>Ideal für einfache Websites</li>
                                    <li>Keine Datenbank</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#phpInfo">
                                <i class="bi bi-filetype-php"></i>&nbsp; PHP Website
                            </button>
                        </h2>
                        <div id="phpInfo" class="accordion-collapse collapse" data-bs-parent="#templateInfo">
                            <div class="accordion-body">
                                <ul class="mb-0">
                                    <li>Nginx + PHP 8.3 FPM</li>
                                    <li>MariaDB Unterstützung</li>
                                    <li>Ideal für WordPress, Laravel, etc.</li>
                                    <li>Datenbank optional</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#nodeInfo">
                                <i class="bi bi-filetype-js"></i>&nbsp; Node.js App
                            </button>
                        </h2>
                        <div id="nodeInfo" class="accordion-collapse collapse" data-bs-parent="#templateInfo">
                            <div class="accordion-body">
                                <ul class="mb-0">
                                    <li>Node.js 20</li>
                                    <li>Express.js vorinstalliert</li>
                                    <li>MariaDB Unterstützung</li>
                                    <li>Ideal für APIs, Web-Apps</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Template-Info Card ein/ausblenden je nach aktivem Tab
document.addEventListener('DOMContentLoaded', function() {
    const templateTab = document.getElementById('template-tab');
    const gitTab = document.getElementById('git-tab');
    const templateInfoCard = document.getElementById('template-info-card');

    templateTab.addEventListener('shown.bs.tab', function() {
        templateInfoCard.style.display = 'block';
    });

    gitTab.addEventListener('shown.bs.tab', function() {
        templateInfoCard.style.display = 'none';
    });
});
</script>
