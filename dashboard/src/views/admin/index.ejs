<%- include('../partials/pageHeader', {
    title: t('admin:title'),
    titleIcon: 'bi-shield-lock',
    backLink: { href: '/dashboard', label: t('common:nav.dashboard') }
}) %>

<!-- Stats Cards -->
<div class="row g-3 mb-4">
    <div class="col-6 col-lg-3">
        <%- include('../components/statCard', {
            label: t('admin:nav.users'),
            value: stats.users,
            variant: 'primary',
            icon: 'bi-people'
        }) %>
    </div>
    <div class="col-6 col-lg-3">
        <%- include('../components/statCard', {
            label: t('common:roles.admin') + 's',
            value: stats.admins,
            variant: 'success',
            icon: 'bi-person-badge'
        }) %>
    </div>
    <div class="col-6 col-lg-3">
        <%- include('../components/statCard', {
            label: t('admin:index.totalProjects'),
            value: stats.projects,
            variant: 'info',
            icon: 'bi-folder'
        }) %>
    </div>
    <% if (stats.pending > 0) { %>
    <div class="col-6 col-lg-3">
        <%- include('../components/statCard', {
            label: t('admin:pending.title'),
            value: stats.pending,
            variant: 'warning',
            icon: 'bi-person-exclamation'
        }) %>
    </div>
    <% } %>
</div>

<% if (stats.pending > 0) { %>
<!-- Pending Users Alert -->
<div class="alert alert-warning d-flex align-items-center mb-4" role="alert">
    <i class="bi bi-person-exclamation me-3 fs-4"></i>
    <div class="flex-grow-1">
        <strong><%= t('admin:pending.title') %></strong>
        <div class="small"><%= stats.pending %> <%= t('admin:pending.pendingHint') %></div>
    </div>
    <a href="/admin/users/pending" class="btn btn-warning btn-sm ms-3">
        <i class="bi bi-person-check"></i> <%= t('common:buttons.checkNow') %>
    </a>
</div>
<% } %>

<!-- Quick Actions Grid -->
<div class="row g-3">
    <div class="col-md-6">
        <div class="card h-100">
            <div class="card-header">
                <h6 class="mb-0"><i class="bi bi-people me-2"></i><%= t('admin:users.title') %></h6>
            </div>
            <div class="card-body">
                <p class="text-muted small mb-3"><%= t('admin:index.usersDescription') %></p>
                <div class="d-flex gap-2 flex-wrap">
                    <a href="/admin/users" class="btn btn-primary btn-sm">
                        <i class="bi bi-people"></i> <%= t('admin:index.manageUsers') %>
                    </a>
                    <a href="/admin/users/create" class="btn btn-outline-success btn-sm">
                        <i class="bi bi-person-plus"></i> <%= t('admin:users.newUser') %>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="card h-100">
            <div class="card-header">
                <h6 class="mb-0"><i class="bi bi-folder me-2"></i><%= t('admin:projects.title') %></h6>
            </div>
            <div class="card-body">
                <p class="text-muted small mb-3"><%= t('admin:index.projectsDescription') %></p>
                <a href="/admin/projects" class="btn btn-primary btn-sm">
                    <i class="bi bi-folder"></i> <%= t('admin:projects.allProjects') %>
                </a>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="card h-100">
            <div class="card-header">
                <h6 class="mb-0"><i class="bi bi-file-text me-2"></i><%= t('admin:logs.title') %></h6>
            </div>
            <div class="card-body">
                <p class="text-muted small mb-3"><%= t('admin:index.logsDescription') %></p>
                <div class="d-flex gap-2 flex-wrap">
                    <a href="/admin/logs" class="btn btn-primary btn-sm">
                        <i class="bi bi-file-text"></i> <%= t('admin:index.showLogs') %>
                    </a>
                    <a href="/admin/logs?type=error" class="btn btn-outline-danger btn-sm">
                        <i class="bi bi-exclamation-triangle"></i> <%= t('admin:index.errorsOnly') %>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="card h-100">
            <div class="card-header">
                <h6 class="mb-0"><i class="bi bi-rocket-takeoff me-2"></i><%= t('admin:deployments.title') %></h6>
            </div>
            <div class="card-body">
                <p class="text-muted small mb-3"><%= t('admin:index.deploymentsDescription') %></p>
                <div class="d-flex gap-2 flex-wrap">
                    <a href="/admin/deployments" class="btn btn-primary btn-sm">
                        <i class="bi bi-rocket-takeoff"></i> <%= t('admin:nav.deployments') %>
                    </a>
                    <a href="/admin/deployments?status=failed" class="btn btn-outline-danger btn-sm">
                        <i class="bi bi-x-circle"></i> <%= t('common:status.failed') %>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="card h-100">
            <div class="card-header">
                <h6 class="mb-0"><i class="bi bi-hdd-network me-2"></i><%= t('admin:npm.title') %></h6>
            </div>
            <div class="card-body">
                <p class="text-muted small mb-3"><%= t('admin:index.npmDescription') %></p>
                <a href="/admin/settings/npm" class="btn btn-primary btn-sm">
                    <i class="bi bi-gear"></i> <%= t('admin:index.configureNpm') %>
                </a>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="card h-100">
            <div class="card-header">
                <h6 class="mb-0"><i class="bi bi-envelope me-2"></i><%= t('admin:email.title') %></h6>
            </div>
            <div class="card-body">
                <p class="text-muted small mb-3"><%= t('admin:index.emailDescription') %></p>
                <a href="/admin/settings/email" class="btn btn-primary btn-sm">
                    <i class="bi bi-gear"></i> <%= t('admin:index.configureEmail') %>
                </a>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="card h-100">
            <div class="card-header">
                <h6 class="mb-0"><i class="bi bi-cloud-download me-2"></i><%= t('admin:updates.title') %></h6>
            </div>
            <div class="card-body">
                <p class="text-muted small mb-3"><%= t('admin:index.updatesDescription') %></p>
                <a href="/admin/updates" class="btn btn-primary btn-sm">
                    <i class="bi bi-cloud-download"></i> <%= t('admin:index.checkUpdates') %>
                </a>
            </div>
        </div>
    </div>
</div>
